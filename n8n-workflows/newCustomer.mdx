```mdx
# Workflow: Cadastro de Cliente (n8n)

## Objetivo

Cadastrar cliente automaticamente no CRM após formulário.

## Etapas

1. **Webhook** — recebe payload do formulário
2. **Function** — valida campos e normaliza `telefone`
3. **IF** — verifica duplicidade no CRM
   - **Sim** → envia alerta (Telegram) e encerra
   - **Não** → cria contato (HTTP Request → Freshsales)
4. **Set** — forma payload final para logs
5. **Supabase** — insere log (`logs_workflows`)

## Entradas

- JSON do formulário: `nome`, `email`, `telefone`

## Saídas

- `contactId` do CRM, `status`, `timestamp`

## Observações

- Execução apenas horário comercial (condição no nó inicial)
- Reprocesso: reenviar payload para o Webhook com header `X-Retry: 1`
```
